{% extends "layouts/base.html" %}
{% load static %}

{% block title%}
    My account
{% endblock %}

{% block head %}
   <link rel="stylesheet" href="{% static 'users/css/account-style.css' %}">
{% endblock %}

{% block body %}
<div class="account-title-div">
    <h1 class='account-title'>
        My account
    </h1>
</div>

<div class='main-page'>

    <div class="d-flex align-items-start added-gap">
        <div class="nav flex-column nav-pills me-3 added-class-buttons bordered" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <button class="nav-link nav-link-color active" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="true">Profile</button>
            <button class="nav-link nav-link-color" id="v-pills-posts-tab" data-bs-toggle="pill" data-bs-target="#v-pills-posts" type="button" role="tab" aria-controls="v-pills-posts" aria-selected="false">Posts</button>
        </div>
        
        <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade show active" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                 <section class="account-info">
                    <div class="account-info-photo">
                        <img src="{{ profile.profile_picture.url }}" alt="Profile picture of {{ request.user.username }}" class='account-photo'>
                    </div>
                    <div class='account-info-username border-step4'>
                        <p class='label'>Username</p>
                        <p class='account-data'> {{ request.user }} </p>
                    </div>

                    <div class='account-info-email'>
                        <p class='label'>Email</p>
                        <p class='account-data'> {{ request.user.email }} </p>
                    </div>
                    
                    <div class='account-info-bio'>
                        <p class='label'>Bio</p>
                        <p class='account-data'> {{ profile.bio }}</p>
                    </div>
                </section>
            </div>
            <div class="tab-pane fade" id="v-pills-posts" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                <section class='posts-info'>
                    <div class='posts-info-number'>
                        <p class="label">number of posts</p>
                        <p class="posts-data">{{ posts.count }}</p>
                    </div>
                    <div class='posts-info-posts'>
                        <p class="label">Posts:</p>
                        {% for post in posts %}
                            <div class="account-posts">
                                <p class='post-body'>{{ post.body }}</p>
                                <p class='post-date'>{{ post.date }}</p>
                            </div>
                            <div class="icons">
                                <div class="likes-section">
                                    <span class='likes-count'>{{ post.likes.count }}</span>
                                    <i class="fa-solid fa-heart {% if post.user_liked %}liked{% endif %}" data-slug="{{ post.slug }}"></i>
                                </div>
                                <div class="comments-section">
                                    <span class="comments-count">{{ post.comments.count }}</span>
                                    <i class="fa-solid fa-comment" data-post-slug="{{ post.slug }}"></i>
                                </div>
                            </div>
                        {% empty %}
                            <p>No posts yet.</p>
                        {% endfor %}
                    </div>
                </section>
            </div>
        </div>
    </div>

</div>

<script src="{% static 'posts/js/like-comment.js' %}"></script>

{% endblock %}